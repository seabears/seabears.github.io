---
title: STM32 GPIO Register 제어
description: >-           #한 문장으로 나옴
  
date: 2025-02-25 14:38:19 +0900
lastmod : 2025-02-25 14:38:19 +0900  #마지막 수정 시간

author: "seabears"      # 작성자

categories: # 카테고리
    - Uncategorized  
tags: 
    - Untag1

sitemap :
  changefreq : daily
  priority : 1.0

#excerpt: "이 글의 요약"   # 요약
#image: "url_to_image.jpg"   # 대표 이미지 (옵션)
#permalink: /category1/first-post/
pin: false              # true | false
published: true        # true | false
---

## 📟 STM32 GPIO Register 제어
RM0367 Reference manual을 확인하며 작성  
[RM0367 Reference manual](https://www.st.com/resource/en/reference_manual/rm0367-ultralowpower-stm32l0x3-advanced-armbased-32bit-mcus-stmicroelectronics.pdf)  


GPIO 제어를 위해 다음 단계가 필요  
1. RCC GPIO clock enable  
2. GPIO Input/Ouput Mode 설정  
3. GPIO Pin 설정  


### 📌 1. RCC_IOPENR
![RCC 위치](https://github.com/user-attachments/assets/00f0bdff-116d-4a75-b843-1250529d1f36)

0X4002 1000 - 0X4002 13FF 에 RCC 위치  

![RCC_IOPENR offset 확인](https://github.com/user-attachments/assets/bf8a84c5-8504-4293-8a73-4a2b5a037e29)

RCC_IOPENR의 offset : 0x2C  
즉 0x4002 1000 + 0x2C 에 RCC_IOPENR 위치  

![RCC_IOPENR](https://github.com/user-attachments/assets/fe673c59-e0a5-437b-bd9c-9739a322cd3b)
![RCC_IOPENR_PORTA](https://github.com/user-attachments/assets/804b2a4e-088b-4e3f-a6e3-35a2bc66a928)

RCC_IOPENR의 Bit[0:0]에 1로 설정하여 port A clock enable  

```c
//RCC_IOPENR 활성화
//RCC->IOPENR |= 0x1;
*((volatile unsigned int*)0X40021000 + 0x2C) |= 0x1;
```


### 📌 2. GPIO Input/Ouput Mode 설정

![GPIOA](https://github.com/user-attachments/assets/78ef2588-fe92-4ccc-b953-9aa13c199a30)
![GPIOx_MODER](https://github.com/user-attachments/assets/f065d4c4-64df-4ebf-86db-14549f757e55)

GPIOA의 시작 주소 : 0X5000 0000  
GPIOx_MODER의 offset : 0x00  
즉, GPIOA_MODER의 위치 : 0X5000 0000 + 0x00  

PA5(port A, pin 5)를 GPIO 제어할 것이므로 `MODE5[1:0]`를 `01 : General purpose output mode` 로 설정  

```c
//GPIO : PA5
//GPIOA->MODER &=~(0x3 << (5 * 2));
//GPIOA->MODER |= (val << (5 * 2));
*((volatile unsigned int*)0X50000000 + 0x00) &= ~(0x3 << (5 * 2));   //나머지 비트는 살리기
*((volatile unsigned int*)0X50000000 + 0x00) |=  (0x01 << (5 * 2));  //MODE5[1:0]를 0x01으로 설정
```


### 📌 3. GPIO pin 설정
**ODR 레지스터로 제어 (GPIO port output data register)**  

![GPIO_ODR](https://github.com/user-attachments/assets/e1841546-e140-4bbb-a5ad-5db24786d23c)

GPIOA의 시작 주소 : 0X5000 0000  
GPIOx_ODR의 offset : 0x14  

```c
//GPIOA->ODR &= 0 << 5;
//GPIOA->ODR |= val << 5;

*((volatile unsigned int*)0X50000000 + 0x14) &= (0x0 << 5); //초기화
*((volatile unsigned int*)0X50000000 + 0x14) |= (0x1 << 5); //HIGH 설정
```
