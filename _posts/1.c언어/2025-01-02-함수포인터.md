---
title: 함수포인터
description: >-           #한 문장으로 나옴
  This is 함수포인터
  Write your description here.
date: 2025-01-02 12:20:25 +0900
lastmod : 2025-01-02 12:20:25 +0900  #마지막 수정 시간

author: "seabears"      # 작성자

categories: # 카테고리
    - Uncategorized  
tags: 
    - Untag1

sitemap :
  changefreq : daily
  priority : 1.0

#excerpt: "이 글의 요약"   # 요약
#image: "url_to_image.jpg"   # 대표 이미지 (옵션)
#permalink: /category1/first-post/
pin: false              # true | false
published: true        # true | false
---

### 함수포인터

장점 : 콜백 함수 (callback function) 구현
콜백함수 : 특정 작업 완료 후, 실행될 함수를 동적으로 지정

<br>

```c
#include<stdio.h>

int hot(int a, int b) {
	printf("%s ", __func__);	// __func__ : 매크로, 함수 이름을 문자열로
	printf("(a,b) = (%d, %d)\n", a, b);
	return (a + b);
}
void set_hot(int a, int b, int(*func)(int, int)) {
	int res = func(a, b);
	printf("res : %d\n", res);
}
int main() {

	set_hot(1, 2, hot);

	return 0;
}
```

<br>

#### 2차원 함수 포인터

```c
#include <stdio.h>

#define COL (2)
#define ROW (2)

void f00() { printf("This function is %s()", __FUNCTION__); }
void f01() { printf("This function is %s()", __FUNCTION__); }
void f10() { printf("This function is %s()", __FUNCTION__); }
void f11() { printf("This function is %s()", __FUNCTION__); }

int main() {
	// 2차원 함수 포인터 배열을 선언하시오.
	void (*fp[COL][ROW])() = { NULL, };

	// 2차원 함수 포인터 배열에 위 함수를 모두 대입하시오
	fp[0][0] = &f00;
	fp[0][1] = &f01;
	fp[1][0] = &f10;
	fp[1][1] = &f11;

	int col = 0;
	int row = 0;
	printf("input col : ");
	int d1 = scanf("%d", &col);
	printf("input row : ");
	int d2 = scanf("%d", &row);

	// 2차원 함수 포인터배열의 주소 출력 및 함수를 호출하시오
	printf("Address of fp[%d][%d]: 0x%p \r\n", col, row, fp[col][row]);
	fp[col][row]();
	printf("\r\n");

	return 0;
}
```

<br>

#### 함수 포인터 이럴 때 쓰면 좋다

```c
#include<stdio.h>

#define print_func_name (printf("%s\n", __func__))

void zero() { print_func_name; }
void one() { print_func_name; }
void two() { print_func_name; }
void three() { print_func_name; }
void four() { print_func_name; }
void five() { print_func_name; }
void six() { print_func_name; }
void seven() { print_func_name; }
void eight() { print_func_name; }
void nine() { print_func_name; }

int main() {
	int num = 0;
	printf("Enter a num between 0 to 9 : ");
	scanf("%d", &num);


#define MAX_FUNC_CNT (10)
	
	void (*fp_arr[MAX_FUNC_CNT])() = {
		zero, one, two, three, four, five, six, seven, eight, nine
	};


	(*fp_arr[num])();


	return 0;
}
```


<br>

### 더 많은 예시

```c
#include <stdio.h>

// 콜백 함수의 형태로 사용할 함수
void print_result(int result) {
    printf("Result: %d\n", result);
}

// 함수를 포인터로 받아서 호출하는 함수
void perform_calculation(int a, int b, void (*callback)(int)) {
    int result = a + b;  // 계산 작업
    callback(result);     // 계산 완료 후 콜백 함수 호출
}

int main() {
    // perform_calculation 함수에 콜백 함수 print_result를 전달
    perform_calculation(5, 3, print_result);
    
    return 0;
}

```



#### 예시

#### void (*pfunc)(int, int) = &bts;

```c
#include <stdio.h>

void bts(int a, int b) {
    printf("hi");
}
int main(){
    int a = 123;
    void (*pfunc)(int, int) = &bts;   // ==  void (*pfunc)(int, int) = (void*)bts;
    pfunc(1,3);

   
    return 0;
}

```

#### int (*operation)(int, int);

```c
#include <stdio.h>

// 함수 선언
int add(int a, int b) {
    return a + b;
}

int subtract(int a, int b) {
    return a - b;
}

int multiply(int a, int b) {
    return a * b;
}

int divide(int a, int b) {
    if (b != 0) {
        return a / b;
    }
    else {
        printf("Error: Division by zero\n");
        return 0;
    }
}

int main() {
    // 함수 포인터 선언
    int (*operation)(int, int); //괄호 중요

    int num1 = 10, num2 = 5;
    char operator = '+';

    // operator에 따라 다른 함수를 호출하도록 설정
    if (operator == '+') {
        operation = add;
    }
    else if (operator == '-') {
        operation = subtract;
    }
    else if (operator == '*') {
        operation = multiply;
    }
    else if (operator == '/') {
        operation = divide;
    }
    else {
        printf("Invalid operator\n");
        return -1;
    }

    // 함수 포인터를 통해 함수 호출
    int result = operation(num1, num2);
    printf("Result: %d\n", result);

    return 0;
}

```

<br>

#### void* op = (void*)add;

```c
#include <stdio.h>

// int형 값을 반환하는 함수
int add(int a, int b) {
    return a + b;
}

// void형 함수: int형 함수를 받는 함수
void callOperation(void* op, int a, int b) {
    // void* 포인터를 (int (*)(int, int)) 형식으로 캐스팅
    int (*operation)(int, int) = (int (*)(int, int))op;
    printf("Result: %d\n", operation(a, b));
}

int main() {
    // add 함수의 주소를 void* 포인터로 넘기기
    void* op = (void*)add;
    
    // callOperation 함수에서 void* 포인터를 사용하여 add 함수 호출
    callOperation(op, 5, 3);  // Result: 8 출력

    return 0;
}

```

