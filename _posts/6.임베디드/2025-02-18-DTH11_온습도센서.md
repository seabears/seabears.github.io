---
title: DTH11_ì˜¨ìŠµë„ì„¼ì„œ
description: >-           #í•œ ë¬¸ì¥ìœ¼ë¡œ ë‚˜ì˜´
  
date: 2025-02-18 09:49:07 +0900
lastmod : 2025-02-18 09:49:07 +0900  #ë§ˆì§€ë§‰ ìˆ˜ì • ì‹œê°„

author: "seabears"      # ì‘ì„±ì

categories: # ì¹´í…Œê³ ë¦¬
    - Uncategorized  
tags: 
    - Untag1

sitemap :
  changefreq : daily
  priority : 1.0

#excerpt: "ì´ ê¸€ì˜ ìš”ì•½"   # ìš”ì•½
#image: "url_to_image.jpg"   # ëŒ€í‘œ ì´ë¯¸ì§€ (ì˜µì…˜)
#permalink: /category1/first-post/
pin: false              # true | false
published: true        # true | false
---


## DTH11

### ğŸ“Œ ë™ì‘ì›ë¦¬ (Datasheetê¸°ë°˜)
[DHT11 datasheet ë§í¬](https://www.mouser.com/datasheet/2/758/DHT11-Technical-Data-Sheet-Translated-Version-1143054.pdf?srsltid=AfmBOop2RN0NTBE9XR5JYcUIbJkQ2eM6xyfQ1_4S1Qt3aLVaMhoHMI2o)


#### 1. ê¸°ë³¸ êµ¬ì¡°
![dht11 êµ¬ì¡°](/_posts/6.ì„ë² ë””ë“œ/DHT11_img/1.dht11êµ¬ì¡°.png)

data ë¼ì¸ í•˜ë‚˜ë¡œ MCUì™€ í†µì‹ 

#### 2. ì „ì••
![dht11 ì „ì••](/_posts/6.ì„ë² ë””ë“œ/DHT11_img/2.ì „ì••.png)
3.5V ~ 5V DC ê³µê¸‰ í•„ìš”

#### 3. í†µì‹  ë°©ì‹
![dht11 í†µì‹ ](/_posts/6.ì„ë² ë””ë“œ/DHT11_img/3.ë‹¨ì¼%20ë°ì´í„°%20ë¼ì¸.png)

Single Wire ì–‘ë°©í–¥ Serial í†µì‹   

í•œ ì „ì†¡ì— 40bit
- 8bit : ìŠµë„ ì •ìˆ˜ë¶€
- 8bit : ìŠµë„ ì†Œìˆ˜ë¶€
- 8bit : ì˜¨ë„ ì •ìˆ˜ë¶€
- 8bit : ì˜¨ë„ ì†Œìˆ˜ë¶€
- 8bit : ì²´í¬ì„¬

```c
typedef struct{
    uint8_t humidity_int;
    uint8_t humidity_dec;
    uint8_t temperature_int;
    uint8_t temperature_dec;
    uint8_t checksum;
}DHT11_Data;    //40bit
```


#### 4. í†µì‹ ì „ ì‚¬ì „ì„¤ì •
![dht11 ì‚¬ì „ì„¤ì •1](/_posts/6.ì„ë² ë””ë“œ/DHT11_img/4.í†µì‹ ìœ„í•œì‚¬ì „ì„¤ì •1.png)

![dht11 ì‚¬ì „ì„¤ì •1](/_posts/6.ì„ë² ë””ë“œ/DHT11_img/5.í†µì‹ ìœ„í•œì‚¬ì „ì„¤ì •2.png)

1. Low ì „ì•• ìµœì†Œ 18ms ê³µê¸‰
2. High ì „ì•• ê³µê¸‰ í›„ 20 ~ 40us ëŒ€ê¸°

#### 5. ì„¼ì„œê°’ ë°›ê¸°
![dht11 ì‚¬ì „ì„¤ì •1](/_posts/6.ì„ë² ë””ë“œ/DHT11_img/6.ì„¼ì„œê°’ë°›ê¸°.png)

dht11ì—ì„œ LOW -> HIGH -> LOW ê°’ì„ ë³´ë‚´ì˜¤ëŠ” ê²ƒì„ ëŒ€ê¸°

dht11ë¡œë¶€í„° ìˆ˜ì‹  ì‹œì‘

![dht11 0 ë³´ë‚´ì˜´](/_posts/6.ì„ë² ë””ë“œ/DHT11_img/7.0ì„ë³´ë‚´ì˜¬ë•Œ.png)
![dht11 1 ë³´ë‚´ì˜´](/_posts/6.ì„ë² ë””ë“œ/DHT11_img/8.1ì„ë³´ë‚´ì˜¬ë•Œ.png)

1ë°”ì´íŠ¸ì”© ë³´ëƒ„
ë°”ì´íŠ¸ë‹¹ ì†¡ì‹  ì „ LOWì‹ í˜¸ë¥¼ ë³´ë‚´ì˜´  
dht11ì—ì„œ 0ì„ ë³´ë‚¼ ë•Œ : HIGH ì‹ í˜¸ 26 ~  28 us ë³´ë‚´ì˜´  
dht11ì—ì„œ 1ì„ ë³´ë‚¼ ë•Œ : HIGH ì‹ í˜¸ 70 us ë³´ë‚´ì˜´  



---

### ğŸ“Œ ì½”ë“œ

{% include code_open.html title="ì½”ë“œ ë³´ê¸°" %}
```c
void delay_us(uint32_t us) {
    Ifx_TickTime ticks = IfxStm_getTicksFromMicroseconds(BSP_DEFAULT_TIMER, us);
    waitTime(ticks);
}

uint8_t DHT11_ReadByte(void) {
    uint8_t result = 0;
    for (int i = 0; i < 8; i++) {
        while (IfxPort_getPinState(DHT11_PORT.port, DHT11_PORT.pinIndex) == 0); // LOWë©´ ëŒ€ê¸°
        delay_us(30);  // 26~28usë©´ '0', 70usë©´ '1'

        if (IfxPort_getPinState(DHT11_PORT.port, DHT11_PORT.pinIndex)) {    //70usì´ìƒì¼ ë•Œ Highê¸°ë¡
            result |= (1 << (7 - i));   //MSBë¶€í„° write
        }

        while (IfxPort_getPinState(DHT11_PORT.port, DHT11_PORT.pinIndex) == 1); // HIGHë©´ ëŒ€ê¸°
    }
    return result;
}

int DHT11_process(DHT11_Data *data) {
    uint8_t buffer[5] = {0};

    // MCU â†’ DHT11: Start Signal
    IfxPort_setPinModeOutput(DHT11_PORT.port, DHT11_PORT.pinIndex, IfxPort_OutputMode_pushPull, IfxPort_OutputIdx_general);
    IfxPort_setPinLow(DHT11_PORT.port, DHT11_PORT.pinIndex);
    delay_us(18000);  // ìµœì†Œ 18ms ë™ì•ˆ LOW ìœ ì§€
    IfxPort_setPinHigh(DHT11_PORT.port, DHT11_PORT.pinIndex);
    delay_us(40);  // 20~40us ë™ì•ˆ HIGH ìœ ì§€

    // MCU â† DHT11: ì‘ë‹µ ëŒ€ê¸°
    IfxPort_setPinModeInput(DHT11_PORT.port, DHT11_PORT.pinIndex, IfxPort_Mode_inputPullUp);

    //DHT11ì—ì„œ Low -> High -> Low ë³´ë‚´ì˜´
    uint32_t timeout = TIMEOUT;
    while (IfxPort_getPinState(DHT11_PORT.port, DHT11_PORT.pinIndex) == 1) {
        if (--timeout == 0) return -1;  // ì‘ë‹µ ì—†ìŒ
    }
    timeout = TIMEOUT;
    while (IfxPort_getPinState(DHT11_PORT.port, DHT11_PORT.pinIndex) == 0) {
        if (--timeout == 0) return -1;
    }
    timeout = TIMEOUT;
    while (IfxPort_getPinState(DHT11_PORT.port, DHT11_PORT.pinIndex) == 1) {
        if (--timeout == 0) return -1;
    }

    // ë°ì´í„° ìˆ˜ì‹  (40ë¹„íŠ¸ = 5ë°”ì´íŠ¸)
    for (int i = 0; i < 5; i++) {
        buffer[i] = DHT11_ReadByte();
    }

    // ì²´í¬ì„¬ ê²€ì¦
    if (buffer[4] != (buffer[0] + buffer[1] + buffer[2] + buffer[3])) {
        return -2;  // ì²´í¬ì„¬ ì˜¤ë¥˜
    }

    // ë°ì´í„° ì €ì¥
    data->humidity_int = buffer[0];
    data->humidity_dec = buffer[1];
    data->temperature_int = buffer[2];
    data->temperature_dec = buffer[3];
    data->checksum = buffer[4];


    return 0;
}
```
{% include code_close.html %}

